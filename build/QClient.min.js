!function(a){"use strict";a.QClient={$:jQuery,utils:{},ui:{},data:{},events:{},DEBUG:!1}}(window),function(a){var b=a.$,c=b(a.events),d=function(b){this.name="func_"+a.utils.getGuid(),this.extend(b),this._initFlag=!1,this._data={}};b.extend(d.prototype,{init:function(){var b=this;return b._initFlag||(b._initFlag=!0,a.ui[b.name].init(b),b.initJsBind()),b},isInit:function(){return this._initFlag},get:function(a,b){var c=this._data[a];return void 0!==c?c:b},set:function(a,c){return b.isPlainObject(a)?b.extend(this._data,a):this._data[a]=c,this},clear:function(){return this._data={},this},initJsBind:function(){var a=this;window.jsBind=function(b){var c=[].slice.apply(arguments,[1]);return a[b].apply(a,c)}},extend:function(){var a=[].slice.apply(arguments);a.unshift(this),b.extend.apply(null,a)}}),b.each(["on","off","one","trigger"],function(a,e){d.prototype[e]=function(){return b.fn[e].apply(c,arguments),this}}),a.getLogic=function(a){return new d(a)}}(QClient),function(a){function b(a,b,c,d){var e=arguments,f=e.callee,g=e.length,h=f.length;if(g>h)throw new Error("window.external_call仅接受"+h+"个形参，但当前(extName:"+a+")传入了"+g+"个实参，请适当调整external_call，以保证参数正常传递，避免丢失！");return window.external_call_test?window.external_call_test.apply(null,[].slice.apply(e)):1==g?window.external[a]():2==g?window.external[a](b):3==g?window.external[a](b,c):4==g?window.external[a](b,c,d):void 0}var c=a.$,d=function(a,b){if(a){var d=this.protocol="http",e={url:d+"://"+location.host,type:"GET",dataType:"jsonp",timeout:2e4};this.protocol=d,this.param=c.extend({},a),this.ajaxOpt=c.extend({data:this.param},e,b),this.HOST=d+"://"+location.host}};c.extend(d.prototype,{get:function(a){var b=this,d=c.ajax(a,this.ajaxOpt);return d.then(this.done,function(a){return b.fail(a)})},informClient:function(){var a=this,d=c.Deferred(),e=[].slice.apply(arguments);try{var f=b.apply(null,e);d.resolve(f)}catch(g){d.reject({errno:1e4,errmsg:"通知客户端异常"})}return d.promise().then(a.done,a.fail)},done:function(a){var b=c.Deferred();return b.resolve(a),b.promise()},fail:function(){var a=c.Deferred();return a.reject({errno:999999,errmsg:"网络超时，请稍后重试"}),a.promise()}}),QClient.Sync=d}(QClient),function(a){"use strict";var b=a.utils,c=parseInt((new Date).getTime().toString().substr(4),10);b.getGuid=function(){return c++},b.parseCallback=function(a){return"function"==$.type(a)?a:a===!0?function(){location.reload()}:"string"==$.type(a)&&0===a.indexOf("http")?function(){location.href=a}:function(){}},b.disabledKey=function(){document.onkeydown=function(a){var b=a||window.event,c=b.keyCode;return b.ctrlKey===!0&&82==c||b.ctrlKey===!0&&78==c||116==c||b.ctrlKey===!0&&116==c?(b.keyCode=0,b.returnValue=!1,b.cancelBubble=!0,!1):void 0},document.onclick=function(a){var b=a||window.event,c="";try{c=(b.target||b.srcElement).tagName.toLowerCase()}catch(d){}return(b.shiftKey||b.ctrlKey)&&"a"==c?(b.keyCode=0,b.returnValue=!1,b.cancelBubble=!0,!1):void 0},document.oncontextmenu=function(){return!1},document.ondragstart=function(){return!1},document.onselectstart=function(a){var b=a||window.event,c="";try{c=(b.target||b.srcElement).tagName.toLowerCase()}catch(d){}return"textarea"!=c&&"input"!=c?!1:void 0}},b.stringify=function(a){if("JSON"in window)return JSON.stringify(a);var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a='"'+a+'"'),String(a);var c,d,e=[],f=a&&a.constructor==Array;for(c in a)d=a[c],b=typeof d,a.hasOwnProperty(c)&&("string"==b?d='"'+d+'"':"object"==b&&null!==d&&(d=Safe.stringify(d)),e.push((f?"":'"'+c+'":')+String(d)));return(f?"[":"{")+String(e)+(f?"]":"}")}}(QClient),function(a){"use strict";var b=a.Sync;a.sync={getClassify:function(a){var c=new b;return c.informClient("onGetClassify",a)},getCurrentSkin:function(){var a=new b;return a.informClient("GetCurrentSkinName")}}}(QClient),function(a){"use strict";var b=a.utils,c=a.getLogic({name:"changeSkin",run:function(c){var d=this,e=c.catgoryConf;d.init(),a.sync.getClassify(b.stringify(e)),a.sync.getCurrentSkin().done(function(a){var b=a.extra_info;d.setCurrentSkin(b)})},setCurrentSkin:function(a){this.trigger("setCurrentSkin",a)},setDownLoadStart:function(a){this.trigger("setDownLoadStart",a)},setDownLoadSuccess:function(a){this.trigger("setDownLoadSuccess",a)},setDownLoadFailed:function(a){this.trigger("setDownLoadFailed",a)}});a.changeSkin=function(a){c.run(a)}}(QClient),function(a){"use strict";var b=a.$,c=b(".skin-list"),d={init:function(a){this.model=a,this.initEvent(),this.initModelEvent()},initModelEvent:function(){var a=this;this.model.on("setDownLoadFailed",function(b,c){var d=a.getCurrentItem(c);a.stopLoading(d),d.addClass("err")}).on("setDownLoadSuccess",function(b,c){var d=a.getCurrentItem(c);a.stopLoading(d)}).on("setDownLoadStart",function(b,c){var d=a.getCurrentItem(c),e=d.find("i span"),f=0;d.addClass("loading").removeClass("err hover"),d[0].timer=setInterval(function(){f=f>=12?0:f;var a=32*-f;e.css("left",a),f++},100)}).on("setCurrentSkin",function(b,c){var d=a.getCurrentItem(c);a.stopLoading(d),d.addClass("selected").siblings().removeClass("selected")})},initEvent:function(){var a=this;c.on("click","a",function(){var a=b(this).parent();return a.hasClass("loading")||a.hasClass("selected")?!1:void 0}),c.on("mouseover","a",function(){var a=b(this).parent();!a.hasClass("loading")&&!a.hasClass("selected")&&a.addClass("hover")}).on("mouseout","a",function(){b(this).parent().removeClass("hover")});var d=c.find("img");d.lazyload({container:c}),a.scrollBar=new CusScrollBar({scrollDir:"y",contSelector:c,scrollBarSelector:".scroll",sliderSelector:".slider",wheelBindSelector:".wrapper",wheelStepSize:151}),a.scrollBar._sliderW.hover(function(){b(this).addClass("cus-slider-hover")},function(){b(this).removeClass("cus-slider-hover")}),a.scrollBar.on("resizeSlider",function(){b(".slider-bd").css("height",this.getSliderSize()-10)}).resizeSlider()},reload:function(){var a=this,c=[];b(".item").each(function(){"block"==b(this).css("display")&&c.push(b(this))}),b.each(c,function(a){if(9>=a){var c=b(this).find("img");c.attr("src",c.attr("data-original"))}}),c.length<=6?b(a.scrollBar.options.scrollBarSelector).hide():b(a.scrollBar.options.scrollBarSelector).show(),b(a.scrollBar.options.sliderSelector).css("top",0),a.scrollBar.resizeSlider().scrollToAnim(0)},LoadCatgory:function(a){if(a&&"all"!=a){var b=c.find('.item[data-type="'+a+'"]');c.find(".item").hide(),b.fadeIn(100)}else c.find(".item").fadeIn(100);this.reload()},setErrByLevel:function(){console&&console.log("等级不符，快去升级吧！")},getCurrentItem:function(a){return c.find('.item[data-key="'+a+'"]')},stopLoading:function(a){a.hasClass("loading")&&(clearInterval(a[0].timer),a[0].timer=null,a.removeClass("loading"),a.find("i span").css("left","0"))}};a.ui.changeSkin={init:function(){d.init.apply(d,arguments)}}}(QClient);